 ===========================================

  **原文链接**：<http://dev.bitshares.works/en/master/development/testnets.html>

 **译者**：https://github.com/towel223 （小办龙的蜗牛）

 **校对者**：

 ===========================================

# BSIP38:在空头头寸里增加一个目标抵押比例设置 #

## 目录 ##
- 动机
- 从BSIP-38摘要谈起
- 讨论和发展
- 单元测试



## 动机 ##
从BSIP-38摘要谈起
当做空头寸的保证金到达临界点，其部分抵押资产将被出售，其部分或全部债务将相应地得到偿付。
然而，与维持最低抵押比例所需的最低数量相比，通常更多的抵押资产将被出售。
这个BSIP目标是一个让空头在达到最低抵押率时，可以控制卖出多少抵押资产的协议。
这个BSIP来自于BSIP31决定


## 讨论与发展 ##
- 发展概况
- 技术讨论
- 代码修改的摘要（合并）
- 代码修改的摘要（推动反馈）
- 个别代码修改

## 单元测试 ##

- 在一个模拟真实的区块链上，修改测试框架（实现）

这个"database fixture"是一个通过追踪区块链上一个节点的网络数据库构造的虚拟的区块链和数据库。

这个可选择的规则，允许区块链上账户抵押资产的目标抵押比例。（调用规则）。


- 模拟一个活跃的区块链，改变测试框架。（广播头部）

这个头部已经被修改为宣布这个可选择的空头抵押目标比例。（调用规则）。


- 测试这个创建不同目标抵押比例的功能，即使他们没有在区块链上确认。

这个功能是通过客户端软件测试（比如CLI，参考钱包，安卓钱包）描述一个区块链上账户创建或更新空头头寸的操作（目标）。这个操作将在内部始终如一的自我实现并且对操作建立有效规则。这个目标将会被优先确认的远程节点确认。


- 价格与数量的乘法四舍五入测试

这个功能测试当填充命令时用区块链的逻辑。


- 测试调用规则

当已存在的空头头寸的检测状态在区块链上发生时，这个测试检验指定的逻辑。这个测试检测给定的一个特定的喂价和一个与喂价匹配的价格（有买有卖的位置）时的不同空头头寸（调用规则）。这些不同的债仓有不同的抵押率，其中一些债仓没到达临界点，有一些则需要在随后补充抵押资产，并且有些债仓已经没有充足的抵押资产（比如黑天鹅）。

- 测试市场规则

这两个测试检验了约定好的规则是否与之相匹配。

第一个测试是检验一个限定规则接受者和多个规则发起者的匹配。

第二个测试是检验一个限定规则发起者与多个限定规则触发者的匹配。


Contributor: @taconater