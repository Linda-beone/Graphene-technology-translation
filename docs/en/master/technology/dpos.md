  **原文链接**：[http://how.bitshares.works/en/master/technology/dpos.html](http://how.bitshares.works/en/master/technology/dpos.html)
 
 **译者**：[https://github.com/b-t-s-1](b-t-s-1)
 
 **校对者**： 
  
***   

# 委托权益证明机制 (DPOS)

委托证明（DPOS）是一种保护加密货币网络的新方法。 DPOS试图解决比特币传统的工作证明系统和Peercoin和NXT的股权证明系统的问题。 DPOS实施了一层技术民主，以抵消中心化的负面影响。

目录

* 背景
* DPOS背后的原理
  - 股东处于控制之中
  - 挖矿作为委托工作证明
  - 不随机选择用户代表的原因
* 可扩展性
* 代表的角色
* 投票算法
  - 我如何获得投票？
  - 为什么只使用upvotes？
  - 如何计算投票？
  - 有反投票吗？
* 攻击的抑制因素
* 有多少见证人正在保护网络
* DPOS信息图
* 来源和讨论

## 背景

委托的股权证明通过使用见证人（正式称为_delegates_）减轻了中心化的潜在负面影响。共有N个见证人签署了这些块，并且每个使用该网络的人都会对其进行投票。通过使用去中心化的投票流程，DPOS在设计上比同类系统更民主。 DPOS没有消除对所有信任的需求，而是采取了保障措施，确保代表网络信任签名块的人员正确无误地做到这一点。此外，签名的每个块必须验证其前面的块是否由受信任节点签名。 DPOS消除了在确认交易之前等待一定数量的不可信节点验证交易的需要。

这种减少的确认需求增加了交易时间。通过有意识地与最值得信赖的潜在块签名者建立信任，如网络所决定的，不需要施加任何人为障碍来减慢块签名过程。 DPOS允许在块中包含比工作证明或股权证明系统更多的交易。 DPOS技术允许加密货币技术在可与Visa和万事达卡等中心化清算所竞争的水平上进行交易。这些票据交换所管理着世界上最流行的电子支付系统。

在委托的股权证明系统中，中心化化仍然存在，但它是受控制的。与保护加密货币网络的其他方法不同，DPOS系统中的每个客户端都能够决定谁可以信任而不是信任集中在拥有最多资源的人手中。 DPOS允许网络获得中心化的一些主要优势，同时仍然保持一些去中心化度量。该系统由公平选举程序强制执行，任何人都可能成为大多数用户的委派代表。

## DPOS背后的原理

* 给股东一种方式将他们的投票委托给一个密钥（一种不能控制代币的密钥，以便他们可以开采）
* 最大化股东的股息
* 尽量减少为保护网络而支付的金额
* 最大化网络性能
* 最大限度地降低运行网络的成本（带宽，CPU等）

### 股东处于控制之中

DPOS的基本特征是股东仍然在掌控涨。如果它们仍然处于控制之中，那么它就是去中心化的。由于投票可能存在缺陷，因此在涉及公司的共享所有权时，这是唯一可行的方式。幸运的是，如果你不喜欢谁在经营公司，你可以出售，这种市场反馈导致股东比公民投票更合理。

每个股东都可以投票给某人代替他们签名（如果你愿意，可以代表他们）。任何可以获得1％或更多选票的人都可以加入董事会。代表们成为“董事会”，以循环方式轮流签署块。如果其中一位董事错过了机会，客户将自动将投票转为远离他们。最终，这些董事将被选出董事会，其他人将加入。董事会成员将获得一笔小额代币，以确保他们有时间确保正常运行时间和激励活动。他们还发布了一个小额债券，相当于他们为生产单个区块所获得的平均工资的100倍。为了获利，董事的正常运行时间必须超过99％。

### 挖矿作为委托工作证明

那么这与比特币有何不同？使用比特币，用户必须选择一个矿池，每个池通常具有10％或更多的哈希算力。这些池的运营者就像是指向池中的客户的代表。比特币期望用户切换矿池以防止算力过于集中，但总共有五个主要矿池控制着网络，如果其中一个池被泄露，则预计会进行手动干预。如果矿池算力下降，那么块生产率将按比例放缓，直到它恢复。在哪个矿池挖矿成为一个政治问题。

### 不随机选择用户代表的原因

* 很可能他们不在线。
* 攻击者将获得与其股份成比例的控制权，而无需进行任何同行评审。
* 在没有任何挖矿的情况下，以去中心化方式生成随机数是不可能的，因此攻击者可以控制随机数生成。

## 可扩展性

假设每笔交易的固定验证成本和每笔交易的固定费用，则可以进行的权力下放量有限。假设验证成本与费用完全相等，则网络完全中心化，只能提供一个验证器。假设费用是验证成本的100倍，网络可以支持100个验证器。

像Nxt和Peercoin这样的系统如果打算让每个人都成为验证者并且大规模收取费用，将会收取过高的费用。这对Nxt和Peercoin意味着，除非他们的费用高于我们的DPOS链，否则任何持股比例低于1％的人都无法获利。如果这些链假设100名代表过于集中并开始宣传他们有1000个验证器，那么他们的费用必须是DPOS的10倍。如果这样一个链增长到比特币的大小，那么那些价值100万美元代币的人就可以获得盈利，大多数人会认为这是一个精英俱乐部。如果他们将最低权益减少为1000美元，那么他们的费用将比DPOS高10,000倍。

DPOS的开发人员假设每个小于验证所需金额的人都不会参加。还假设是“合理”的财富分配。很明显，除非替代链的费用异常高，否则只会有少数人拥有足够的利益以进行有利的验证。

总之，POS有效工作的唯一方法就是委派。在Nxt的情况下，他们可以通过某种方式汇集他们的股份，在可变数量的代表批准投票之前，最终这将像DPOS一样。代表实际上不会像挖矿那样获得任何收入，因为验证费用将消耗绝大部分交易费用。

最终结果是权力下放的成本与验证者的数量成比例，并且成本不会消失。从规模上看，这些成本将集中任何不支持委派的系统。这种集中化应该从一开始就被设计为系统的一部分，以便用户可以对其进行适当的管理和控制，而不是以某种特殊的方式进行演变，这是一种意想不到的后果。

## 代表的角色

* 见证人具有允许生产和广播区块的权利。
* 生产块包括收集P2P网络的交易并使用见证人的签名私钥对其进行签名。
* 在前一个区块结束时随机分配下一轮中的见证人

## 投票算法

### 我如何获得投票？

* 说服其他人对你的见证人投票
* 当另一个用户向你的（以及可能的其他）代表投票
* 用户可以为多个见证人提供投票。 结果所有受欢迎的见证人都得到了投票
* 说服代理人（代表他们的粉丝投票）投票给你

### 为什么只使用upvotes？

* 仅给予投票，并允许每股多票，被称为**批准投票**，并且与旧的_delegation_投票相比具有几个优势。
* 不需要downvotes，这不仅简化了可用性，还减少了代码和复杂性。

### 如何计算投票？

每隔*maintenance interval*，所有投票都会被重新计算，相应的结果才会生效。

### 有反投票吗？

不再有了。 在发现emski的攻击后，开发人员决定使用**批准投票**。

## 攻击的抑制因素

* 通过选择不生产区块，见证人可能会被解雇，并且将来会失去保证利润。
* 如果一个不诚实的代表肯定会从中获胜，那么他们只会失败
* 如果一个彩票只支付了50％的累积奖金（其他50％给予慈善机构），那么这个不诚实的代表所做的最多就是收支平衡。
* 见证人不能签署无效区块，因为该区块也需要其他见证人确认

## 有多少见证人正在保护网络

这完全掌握在股东手中。 如果多数票选出50名见证人，则将使用50名见证人。 如果股东只投票20，那就这样吧。 最低可能的见证人数是11。

## DPOS信息图  
![](http://how.bitshares.works/en/master/_images/DPOS-infographic.jpg)

## 来源和讨论

* https://bitsharestalk.org/index.php?topic=5164.msg67657#msg67657
* https://bitsharestalk.org/index.php?topic=5205.0
* https://github.com/BitShares/bitshares_toolkit/wiki/Delegated-Proof-of-Stake
* https://bitsharestalk.org/index.php?topic=4984.0
* https://bitsharestalk.org/index.php?topic=4927.0
* https://bitsharestalk.org/index.php?topic=4869.0
* https://bitsharestalk.org/index.php?topic=4853.0
* https://bitsharestalk.org/index.php?topic=4836.0
* https://bitsharestalk.org/index.php?topic=4714.0