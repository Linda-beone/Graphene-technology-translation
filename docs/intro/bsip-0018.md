原文链接：https://github.com/bitshares/bsips/blob/master/bsip-0018.md
译者：bt666

    BSIP:0018
    标题:通过购买清算池恢复比特资产
    作者:Fabian Schuh, Peter Conrad
    状态:已安装
    类型:协议
    创建:2017-06-05
    讨论:https://bitsharestalk.org/index.php/topic,24322.0.html
    预算提案:1.14.56

## 摘要 ##

比特股中的比特资产，即与市场挂钩的资产(MPA)，比如比特美元，可能会遭遇“全局清算”事件。在全局清算后，该资产实际上会变得毫无用处。该BSIP提议对协议进行修改，以解决全局清算的问题，从而使受影响的资产能够“恢复”并再次使用。

## 动机 ##

BSIP-0017已经讨论过恢复比特资产的必要性，这是毋庸置疑的。

与市场挂钩的资产，又名智能货币，是比特股区块链的核心功能之一，因此是我们独特的卖点之一。

MPAs可能会遭遇“黑天鹅”事件。当最少抵押的空头头寸没有足够的抵押品以当前的价格回购借来的智能货币时，黑天鹅就会出现MPAs可能会遭遇“黑天鹅”事件。当最少抵押的空头头寸没有足够的抵押品以当前的价格回购借来的智能货币时，黑天鹅就会出现。接下来发生的事情是，MPA被标记为“清算价格”，定义为最少抵押得空头的抵押比率。所有空头头寸都是自动平仓的，方法是将收集足够的抵押品到结算池中，并将剩余部分支付给做空者。MPA持有者可以使用强制清算操作从结算池中获得他们的份额，以交换他们的MPAs。即使在全局清算后，与市场挂钩的资产仍可以转账或交易，但它们已无法再借入。

目前，在比特股中，没有实际的方法来解决全局清算问题，但最终所有重要的持有者都将清算他们的头寸，并且还会留下一点剩余量，这些少量的头寸的价值将低于清除它们所需的费用。

## 基本原理 ##

当与市场挂钩的资产经历全局清算时，支持挂钩的关键机制之一(即“追加保证金”)就不再可用了。然而，其他机制，如“面值”、交易和清算仍然存在，除非底层资产的估值显著下降，未偿债务(比特资产多头头寸)仍以固定清算价格通过清算池进行抵押。甚至有可能抵押品的价值远远超过MPA的名义价值。

例如，如果USD以1bitUSD/BTS的价格发生全局清算事件，那么1000bitUSD的未偿债务将由bitUSD的清算池中的1000BTS作为抵押。任何其他人都不能开放追加头寸。在这种情况下，每一个bitUSD多头头寸都可以在清算池中以1:1的速度获取BTS。

## 提案 ##

恢复资产所需的一切是:

- 重新启用的喂价
- 用充分抵押的追加头寸替换结算池

由于在全局清算后，未清多头头寸的抵押品存储在清算池中，因此我们提出了一种从网络中**获取清算池资金和未清债务的方法**。由于全局清算后的清算池的抵押比率是100%,因此获得清算资金以便将它转换成一个未平的追加头寸**需要提供额外抵押品或减少债务**，以便不引起另一个全局清算或追加保证金。

## 详情 ##

与BSIP-0017一样，SWAN作为全局清算的资产，让BACK成为支持SWAN的资产。

### bug修复:遇到全局清算的MPAs在喂价到期后无法得到清算 ###

事实证明，强制清算MPA需要一个有效的喂价，即使MPA具有settlement\_price集合。这显然是一个bug，因为在这种情况下，清算价格独立于喂价。此外，在黑天鹅事件之后，发布喂价就不可能了，所以可以清算的时间仅限于MPA的喂价的到期时间。

这需要修复。请参阅[https://github.com/cryptonomex/graphene/issues/664# issues ecomecom-254056746。](https://github.com/cryptonomex/graphene/issues/664#issuecomment-254056746)

（这个修复也是BSIP-0017的一部分。显然，它只需要修复一次。在这里重复一遍，因为目前还不清楚哪一个提案会被实施。）

### 清算资金增值后自动恢复 ###

这只适用于智能货币，不适用于预测市场。

BACK价格的上涨可能会导致SWAN的价值远远超过它原来的预期。也就是说，清算基金的价值要远远大于SWAN现有供应量的名义价值。

当清算基金的价值达到最低要求的抵押品(就喂价和MCR而言)时，将创建(或更新)SWAN发行商拥有的call_order_object对象，该对象将settlement_fund作为抵押品并涵盖了全部债务。随后，settlement_fund和settlement_price将被清除，从而恢复资产。

更新喂价时可以很容易地检查条件。显然，这需要一个喂价。目前还不可能公布全局清算后资产的喂价。这一限制将被删除。

### 再抵押 ###

这只适用于智能货币，不适用于预测市场。

**概述**

当清算基金的价值增加到足够多时，把它变成空头头寸的想法可以很容易得到扩展。如果清算基金本身的价值太低，无法创造出足够的抵押的空头头寸(就喂价和MCR而言)，投资者可以自愿向基金增加所需的抵押品金额，并持有由此产生的空头头寸(抵押+债务)。

提议的操作使潜在投资者能够“投标”额外抵押品，以接收部分债务(或全部债务)。当有足够的出价来支付全部未偿债务，并且所有这些债务都有足够的抵押(就喂价和MCR而言)时，settlement_fund和出价就会变成追加头寸。最后，从资产中删除settlement_price，从而恢复资产。

如果可用的出价超过了未偿债务，那么具有较高抵押/债务比率的出价优先于那些具有较低比率的出价。目的是将投资者之间的竞争转化为更好的抵押追加，这符合MPA持有人的利益。

**bid_collateral_operation**

该操作具有以下有效负载:

- fee(asset_type):操作需要支付的费用
- bidder(account_type):该帐户支付额外的抵押，如果出价被接受的话，将成为生成的多头头寸的所有者，
- additional_collateral(asset_type):账户为支持追加头寸而支付的抵押
- debt_covered(asset_type):账户愿意支付的债务金额

操作工作如下:

1. 支付费用
1. 如果账户已经对同一MPA出了价，那么现有的出价将被取消(见下文)。
1. 如果debt_covered等于0，则不采取进一步的操作。
1. 通过additional_collateral减少账户余额。
1. 创建了一个cdo _bid_object，其中包含出价者和以additional_collateral / debt_covered计算得出的部分倒置SWAN价格

操作所需的有效性检查如下:

- debt == 0 || debt > 0 && collateral > 0

操作所需的评估检查如下:

- debt_covered.asset必须是带有settlement_price的bitasset(而不是PM)
- additional_collateral.asset必须是支持SWAN的资产
- 账户必须有足够的BACK，即至少有additional_collateral

显然，该操作必须经过出价者授权。

**collateral_bid_object**

collateral_bid_object存储有关使用bid_collateral_operation的账户提供的出价的信息。索引字段有

1. id
1. 债务资产和出价者
1. 债务资产和部分倒置SWAN价格

当一个cdo _bid_object被取消时，additional_collateral(即部分反向SWAN价格的基数)会被返回给出价者，并删除了collateral_bid_object。

部分倒置SWAN价格的目的是为了便于选择出价，这将导致恢复比特资产后具有最低债务/抵押比率的call_order_objects。

**维护**

在每个维护周期中，检查所有带有settlement_price的MPAs是否

- 有一个有效的喂价
- 如果有足够的抵押出价来偿还债务。

如果这两个条件都满足，那么对于每个collateral_bid_object(按照部分倒置SWAN的价格递减排序)，将以这种方式构造一个新的call_order_object，开始是othering_debt = swan .current_supply:

- call.borrower = bid.bidder
- call.debt = bid.debt.amount
- call.collateral = call.debt * SWAN.settlement_price + bid.additional_collateral.amount
- remaining_debt -= call.debt
- SWAN.settlement_fund -= call.debt * SWAN.settlement_price

如果remaining_debt为0，剩余的出价将被取消。对于最后一次转换的出价，所要求的债务可能会小于remaining_debt。在这种情况下，call.debt将被设置为remaining_debt，call.collateral将被设定为 asset.settlement_fund + additional_collateral。

**execute_bid_operation**

为了使恢复资产事件在出价者的账户历史中可见，将引入一个新的虚拟execute_bid_operation，其中包含以下参数:

- 出价者
- 实际偿还的债务
- 结果call_order的总collateral

该操作的语义包括删除现有的出价和创建如上所述的新的call_order。

## 讨论 ##

### 部分取得结算资金 ###

在广泛使用的比特资产被全局清算的情况下，提供足够抵押和相关风险的成本可能高得令人望而却步。提议的出价机制允许在多个参与者之间分摊成本(和风险)。

### 以比特资产为抵押的比特资产不受影响 ###

与BSIP-0017相比，这种方法的一个巨大优势是，由其他比特资产抵押的比特资产不受此提议的直接影响。即使这种资产的经济债务可能会被争论，如果抵押资产经历全局清算，技术债务也不会受到影响。通过该提案将清算池转换为定期追加头寸，不仅可以恢复原始比特资产，还可以重置衍生的比特资产的抵押。

### 成本与利润 ###

对于那些愿意承担使用我们想要讨论的操作的风险的人来说，这个操作开启了一个有趣的成本与利润之间的权衡。 请记住

- 抵押的估值可能不稳定(例如，BTS的例子)
- 在全局清算后，多头头寸可以结算，从而减少债务和清算池

愿意冒险的市场参与者可能希望获得更大的清算池，因为这意味着**即时空头头寸**。

### 喂价 ###

重新抵押并不仅限于全局清算的比特资产的发行商。其目的是激励潜在的投资者。实际上，在抵押价值上升的过程中，这就像反向拍卖。抵押价值越高，重新抵押所需的金额就越低，即机会/风险比率增加。这种激励是有道理的，因为额外的抵押符合已结算比特资产持有者的最大利益。

通过为发行商建立空头头寸自动恢复比特资产时，这种“反向拍卖”会结束。到那时，“投资者”可以以零风险再抵押，这不再符合持有者的利益。

## 股东总结 ##

该提案提供了一种灵活的方式来恢复经历过全局清算的比特资产。区块链或股东不需要承担任何风险，因为该提案只是为市场参与者提供了一种新的方式来（部分）恢复比特资产。

### 版权 ###

本文档放置于公共域名下。