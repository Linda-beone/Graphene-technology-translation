原文链接“https://github.com/bitshares/bsips/blob/master/bsip-0010.md
译者：bt666

    BSIP:0010
    标题:基于CER的百分比制转账手续费解决方案
    作者: Jakub Zarembinski <jakub.zarembinski@neura.sx>
    状态:终稿
    类型:协议
    创建:2015-12-27
    讨论:https://bitsharestalk.org/index.php/topic,20789.0.html
    工作人员:1.14.29

### 股东总结 ###

该工人提案的目的是引入基于百分比的转账手续费解决方案，作为当前固定费率的一种替代方案。主要目的是可以转账小额的比特股。当前的固定转账率对于小额转帐是不利的，因为对于这些转帐来说，转帐手续费占转账总额的很大一部分。正如我们现在所看到的，区块链的大多数区块是空的，从业务角度来看，这显然是对公司资源的一种浪费。

这一提案的目的是为了利用这样一个事实，即通常当用户转账大额交易时，他们更愿意支付更高的转账手续费（这种情况下我们可以有收益),而他们不会接受对于小额交易来说相对多的转账手续费(这是情况下我们需要放弃利润)。当较低的手续费对比特股的小额交易开放时，可以预计网络收入和流动性将全面增加。

该提案之所以重要，还有另一个原因:它为在没有核心开发人员直接参与的情况下向石墨烯添加新特性铺平了道路。由此工作产生的文档将帮助其他开发人员加入生态系统，并提供进一步的功能建议。

## 摘要 ##

任何基于百分比的转账手续费方案都需要某种基础来获取转账金额的实际BTS的价值。这种方法的核心思想是从资产发行商定义的核心汇率(CER)中获得该值。还需要针对引荐系统进行补充修改，从而防止引荐者的滥用。

如果最低转账费用维持在一个合理的水平(即约6bts)，那么实际上受此提案影响的唯一参与者只有引荐业务，因为小额转账会对其收入产生负面影响，而较大金额的转账则会对其收入产生正面影响。对发行商的影响将是积极的，或者根本没有，对于他们来说，这是一个可选择的特性。对于普通股东而言，这种变化将是积极的，因为与其他系统相比，比特股在转账手续费这方面将变得更具竞争力。

如果我们将最低费用控制在6bts左右，区块链本身的金融影响将是中性的，因为所有的利润(或损失)将由引荐者承担。然而，网络的收入预计总体上会有所增加，因为可以肯定的是，一旦小额转账费用变得非常便宜，就会有更多的转账交易，并且每个转账都会为网络的收入做出贡献。

## 动机 ##

对于非终身会员用户来说，比比特股的固定转账手续费是30 BTS，因此，对于低于5美元的小额转账，目前比特股不能被视为具有竞争力的支付解决方案。对于这类小额转账，当前的费用高于2%，这远远超过了传统系统向客户收取的费用。

该提案的目标主要有两个:

- 允许用户为小额交易支付较低的转账手续费(同时对较大金额的转账收取更高的费用)
- 允许引荐者获得与较大金额的转账相关的额外收入(同时从他们那里拿走与小额交易相关的的当前收入)

除此之外，我们希望将详细的文档作为该提案的关键部分，从而使整个生态系统受益:逐步地描述如何在不依赖于CNX的情况下实现新特性，以便其他程序员和企业家能够理解我们的示例。文件将包括:

- 编程上下文:石墨烯体系结构的简要概述
- 在代码和他们的基本原理上做了哪些更改
- 如何进行单元测试和测试网验证
- 整个实现是如何部署的

该文档有希望成为石墨烯开发人员教程的基础。此材料的工作已经开始，在[这里](https://neura-sx.gitbooks.io/graphene-book/content/)可以访问一个简短的预览。

## 基本原理 ##

解决“高额转账费用”问题的最简单方法是降低所有资产的转账费用。然而，这实际上会对引荐计划产生负面影响。另一方面，一个简单的基于百分比的转账费用系统是不可行的，因为对于大多数资产来说，我们没有可行的方法来确定它们在任何给定时间的确切价值。这主要是因为许多市场本质上是非常缺乏流动性的(如SIVER:GOLD)，而且由于难以一种确定性的方式来确定资产价格，以便可靠地防止意外的硬分叉。

此外，如果不针对引荐计划进行任何修改而采用基于百分比的转账费用系统，就有可能让引荐人通过在自己的账户之间来回转账小额资金，从而通过支付发行商的费用获得引荐奖励。因此，对于享受基于百分比的转账费用系统的资产，引用者的收入结构也必须是基于百分比的。

## 详情 ##

**假设**

下面描述使用了一个名为BAX的虚构资产，但该解决方案可以应用于所有资产(即公共和私人智能货币、UIAs和FBAs)和所有非隐身转账。此外，下面描述的内容是指“即用即付”用户。对于终身会员用户，完全适用相同的规则，除了引荐者的收入被重定向到用户的返现基金这种情况之外。

> 请注意，以下描述中使用的值只是一个初步提案，实际值将由委员会使用全局区块链参数确定。

**概念**

对于BAX的转账，转账费用可以用BTS或BAX支付。

1. 如果用户选择以BTS支付费用:

- 转账费等于转账BAX金额的BTS值的1%，按最低限额(即最低费用)和最高限额(即最高费用)进行调整:分别为6 BTS和300 BTS。所以转账费实际上是1%，但不低于6BTS也不超过300BTS。
- 为了确定转账的BTS值，使用了BAX的CER。
- 用户支付的费用按以下方式划分:6个BTS由网络收取，超过6个BTS费用的都奖励给了引荐人。
- 发行商不会获得任何奖励。

1. 如果用户选择以BAX支付费用:设F为转账费用(以BTS表示)，计算方法如(1)所示。

- 使用CER确定等价于F的BAX。
- 发行商将获得用户在BAX中支付的全部费用。
- 以下金额从资产费用池中扣除:6个BTS由网络收取，(F-6) BTS奖励给引荐人。
- 发行商的盈利或亏损取决于CER是高于还是低于实际的BTS/BAX汇率，其方式与现行的固定收费模式相同。

**主要问题**

当发行商假装其资产价值不高，故意将CER保持在实际的BTS/BAX汇率之下，试图人为地降低其资产的转账费用时，会发生什么?

- 对于用户来说:用BTS支付费用比用BAX更便宜
- 对于发行商来说:他在所有的转账中获利，无论出于何种原因，用户都决定使用BAX这种费用更高的支付方式。(而不是用BTS这种更便宜的支付方式)
- 对于引荐者:无论用户使用BAX还是BTS支付费用，他都会被剥夺大部分的引荐奖励，因为由于CER的扭曲，系统将转账理解为涉及的价值低于实际价值。

**问题如何解决**

通过人为压低CER，发行商将有效地阻止用户使用自己的资产，因为转账费用只有在以BTS支付时才会很低，因此转账时支付的费用将取决于用户钱包持有的BTS。此外，如果发行商过于扭曲CER，他自己将无法从中获益，因为用户将开始避免使用BAX支付费用。此外，发行商将自己的资产估值低于市场利率将是糟糕的公关。至少对于智能货币而言，(无论是公有的还是私人的)发行商不太可能以这种方式破坏自己的资产。

**额外的防止滥用机制**

然而，如果大量发行商试图利用这一制度，那么将来我们可以引入以下机制来防止发行商的滥用:

- 为了实现基于百分比的转账费用，发行商必须在BTS:BAX市场上保持公开的询价单，这样任何人都可以以120%的CER价格购买BAX。因此，如果CER与市场汇率不同步超过20%，发行商将遭受重大损失。
- 如果发行商不愿意遵守上述规定，则会采用默认的固定转账费用机制。

> 请注意，这个额外的防止滥用的机制将不会在这个工人提案中执行。如果将来有需要，我们会把它作为一个单独的工人提案。

**这是一个可选择的特性**

由于发行商是实际控制CER的唯一实体，因此基于百分比的转账费用是指由发行商决定的一种可选择的特性。可以肯定的是，大多数发行商会发现这有利于他们的资产，因为:

- 有价值的资产将受益于合理的转账定价结构
- 价值为零或几乎为零的资产(即大多数UIAs)几乎可以免费转账(6 BTS而不是目前的30 BTS)。

然而，如果发行商由于某些原因受益于上述功能，他可以保持现有的固定费用机制。

> 请注意，费用模式的选择并不是永久性的。发行商可以随意地改变主意，在固定模式和基于百分比模式之间来回切换。

**预期的工作流程**

<table style="text-align:center;"><tbody>

     <tr>
        <th > <font face="bold">操作</font> </th> <th > <font face="bold">结果</font> </th>
    </tr>	

    <tr>
        <th > <font face="bold">发行商将其资产设置为基于百分比的转账费用模式。</font> </th> <th > <font face="bold">变更后，该资产的所有转账费用将用新的算法计算。</font> </th>
    </tr>
     <tr>
        <td >发行人将其资产设定为固定转账费用模式</td> <td > 变更后，该资产的所有转账费用将保持不变</td>   </tr>
 <tr>
        <td > 委员会调整费用参数 </td> <td >变更后，对于采用基于百分比的转账费用模式的所有资产的转账，将使用新的参数计算其手续费 </td>   </tr>
 <tr>
        <td > 委员会为智能货币设定基于百分比的费用模式</td> <td > 变更后，该资产的所有转账费用将用新的算法计算 </td>   </tr>
 <tr>
        <td > 委员会为智能货币设定统一费用模式 </td> <td > 变更，该资产的所有转账费用将保持不变 </td>  </tr>
 <tr>
        <td > 用户对使用固定费用模式的资产进行转账 </td> <td > 用户将被收取固定费用，20%的费用用于网络，80%的费用用于引荐计划，并由引荐计划内的各方(注册者、引荐者等)分摊 </td>  </tr>
 <tr>
        <td > 用户对使用基于百分比模式的资产进行转账</td> <td > 用户将被收取基于百分比的费用，最低费用用于网络，剩下的(如果还有剩余的话)将被分配到引荐计划中，并由引荐计划内的各方分摊  </tr>
</table>

## 讨论 ##

对于发行商是自愿的，上述提案实际上是针对引荐业务的:他们是否认为这是对生态系统有益的改变，对他们来说是公平的交易?如果我们坚持使用上述参数值，他们需要放弃低于2美元的转账交易的引荐收入，但如果转账高于10美元，他们的收入将大幅增加。在2美元到10美元之间的范围，他们的平均收入可以达到现在的一半。然而，主要的好处将是间接的:可以更容易的以合理的价格出售产品。

至于比特股网络本身，该提案的整体影响将是积极的，因为网络的资源可以得到更好的利用。按照目前的固定费用标准，大部分区块都是空的。基于百分比的收费不会立即解决这种浪费问题，但对基于小费和小额支付的业务来说，这是朝着正确方向迈出的一步，也是一个真正的机会。

## 涵盖的内容 ##

这项提案涵盖了基于百分比收费的全部实现。
具体包括以下几个方面:

- 编码
- CNX的代码审查
- 单元测试和测试网测试
- 部署
- 类似项目的完整文档和指南
- GUI支持

## 已知的问题和可能的解决方案 ##

这些是确定的问题(或局限)和可能的解决方案:

<table style="text-align:center;"><tbody>
    <tr>
        <th > <font face="bold">已知的问题(或局限)</font> </th> <th > <font face="bold">可能的解决方案</font> </th>
    </tr>
     <tr>
        <td >最小和最大限额的值以BTS计价(系统中的所有费用)。如果这些限制没有定期更新，我们可能最终会发现它们当前的法定价值与预期的初始价值之间存在差异。</td> <td > 有另一个项目(由xeroc运行)旨在解决这个问题，通过引入一种自动的方式来保持所有费用同步到法定目标。因此，如果我们把我们的建议和xeroc的项目结合起来，我们最终会得到一个完整的，稳定的解决方案</td>   </tr>
 <tr>
        <td > 基于百分比的收费方案不能应用于隐私转账。 </td> <td >没有可用的解决方案。由于隐私交易的性质，不可能确定转账的金额，因此不可能按百分比收取转账费用。</td>   </tr>
 <tr>
        <td > 由于技术原因，基于百分比的收费方案不能轻易地适用于核心货币，即BTS。</td> <td > 与CNX一起，我们正在积极寻找解决这一问题的方法——一种考虑的选择是将BTS的所有权从空账户改为委托账户。(我们知道这可能会引起很大的争议，所以请把它看作考虑的几种选择之一。)</td>   </tr>
 <tr>
        <td > 在非常少有的情况下，可能会出现负面的用户体验:当发行商在用户点击转账和点击确认之间更新CER时。在这种情况下，用户可能会收到一个有关资金不足以支付转账费用的错误消息，因此不得不重新转账。</td> <td > 由于roadscape的<a href="https://bitsharestalk.org/index.php/topic,21080.msg275323.html#msg275323" >这一建议</a>，在GUI级别上可能有一个可行的解决方案。 </td>  </tr>
 <tr>
        <td  style="font:bold;"><s>在委员会控制的智能货币的情况下，有时CER的当前值与委员会提案中切换给定智能货币到基于百分比收费模式所设置的CER值可能存在小差异。</s> </td> <td > 我们很可能为代码库提供一个补丁，它可以在不更改CER的情况下更新资产，从而完全修复这个问题。 </td>  </tr>
 <tr>
        <td > 如果委员会决定对智能货币收取基于百分比的费用，这可能会影响第三方合作伙伴(例如交易所，网关等)，尤其是他们的定价政策。</td> <td > 我们的合作伙伴需要提前得到通知，以便他们有时间调整他们的流程。 </tr>
</table>

## 版权 ##

本文档放置于公共域名下。